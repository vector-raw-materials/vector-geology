<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Modelling and Propagation of Legacy Petrophysical Data for Mining Exploration (3/3) &#8212; Vector Geology 0.3.dev17+g93b9dad.d20241008 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=0ca0a429" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <script src="../../_static/documentation_options.js?v=8b60b743"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Bayesian Inference Theory" href="../../external/external_examples.html" />
    <link rel="prev" title="Modeling and Propagation of Petrophysical Data for Mining Exploration (2/3)" href="02_no_2_filling_gaps.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-examples-05-petrophysics-03-no-3-modeling-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="modelling-and-propagation-of-legacy-petrophysical-data-for-mining-exploration-3-3">
<span id="sphx-glr-examples-05-petrophysics-03-no-3-modeling-py"></span><h1>Modelling and Propagation of Legacy Petrophysical Data for Mining Exploration (3/3)<a class="headerlink" href="#modelling-and-propagation-of-legacy-petrophysical-data-for-mining-exploration-3-3" title="Link to this heading">¶</a></h1>
<p><strong>Modeling</strong></p>
<p>Barcelona 25/09/24
GEO3BCN
Manuel David Soto, Juan Alcalde, Adrià Hernàndez-Pineda, Ramón Carbonel</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dotenv</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>The dispersion and scarcity of petrophysical data are well-known challenges in the mining sector. These issues are primarily driven by economic factors, but also by geological (such as sedimentary cover, weathering, erosion, or the depth of targets), geotechnical (e.g., slope or borehole stability), and even technical limitations or availability that have been resolved in other industries (for instance, sonic logs were not previously acquired due to a lack of interest in velocity field data).</p>
<p>To address the challenge of sparse and incomplete petrophysical data in the mining sector we have developed three Jupyter notebooks that tackle these issues through a suite of open-source Python tools. These tools support researchers in the initial exploration, visualization, and integration of data from diverse sources, filling gaps caused by technical limitations and ultimately enabling the complete modeling of missing properties (through standard and more advanced ML-based models). We applied these tools to both, recently acquired and legacy petrophysical data of two cores northwest of Collinstown (County Westmeath, Province of Leinster), Ireland, located 26 km west-northwest of the Navan mine. However, these tools are adaptable and applicable to mining data from any location.</p>
<p>After the exploratory data analysis (notebook 1/3) and filling the gaps in the petrophysical dataset of Collinstown (previous notebook 2/3), this third notebook is focused on modeling by Machine Learning (ML) algorithms entire missing variables, such as the Gamma Ray (GR) measurement, which is available in only one of the petrophysical boreholes. The tasks to perform in this notebook are:</p>
<ul class="simple">
<li><p>Load and merge the legacy GR data of borehole TC-3660-008 into its petrophysical dataset.</p></li>
<li><p>Use the merged data to train and evaluate different ML algorithms capable of predicting GR data in other boreholes.</p></li>
<li><p>By using the trained best model, propagate the GR to the other petrophysical borehole.</p></li>
<li><p>Evaluate the possibility of propagating this (GR) or other properties to other boreholes with less available data.</p></li>
</ul>
<p>As with the previous notebooks, these tasks are performed with open-source Python tools easily accessible by any researcher through a Python installation connected to the Internet.</p>
</section>
<section id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Link to this heading">¶</a></h2>
<p>The dataset used in this notebook is the imputed dataset from the previous notebook (2/3), <em>features3</em>. It contains the modelable petrophysical features of the two available boreholes; TC-1319-005 and TC-3660-008. Hole (text object) and Len (float) variables are for reference, Form (text object) is a categorical variable representing the Major Formations:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Explanation</p></th>
<th class="head"><p>Unit</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Hole</p></td>
<td><p>Hole name</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>From</p></td>
<td><p>Top of the sample</p></td>
<td><p>m</p></td>
</tr>
<tr class="row-even"><td><p>Len</p></td>
<td><p>Length of the core sample</p></td>
<td><p>cm</p></td>
</tr>
<tr class="row-odd"><td><p>Den</p></td>
<td><p>Density</p></td>
<td><p>g/cm³</p></td>
</tr>
<tr class="row-even"><td><p>Vp</p></td>
<td><p>Compressional velocity</p></td>
<td><p>m/s</p></td>
</tr>
<tr class="row-odd"><td><p>Vs</p></td>
<td><p>Shear velocity</p></td>
<td><p>m/s</p></td>
</tr>
<tr class="row-even"><td><p>Mag</p></td>
<td><p>Magnetic susceptibility</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Ip</p></td>
<td><p>Chargeability or induced polarization</p></td>
<td><p>mv/V</p></td>
</tr>
<tr class="row-even"><td><p>Res</p></td>
<td><p>Resistivity</p></td>
<td><p>ohm·m</p></td>
</tr>
<tr class="row-odd"><td><p>Form</p></td>
<td><p>Major formations or zone along the hole</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The GR measurement from keyhole TC-3660-008 is the property we want to transfer to the other borehole, TC-1319-005. The challenge lies in the fact that both datasets have different ranges and intervals, and is not possible to make an ML model unless both datasets (new petrophysical features and legacy GR) are integrated into a single dataframe.</p>
</section>
<section id="libraries">
<h2>Libraries<a class="headerlink" href="#libraries" title="Link to this heading">¶</a></h2>
<p>The following are the Python libraries used along this notebook. PSL are Python Standard Libraries, UDL are User Defined Libraries, and PEL are Python External Libraries:</p>
<p>PLS</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="c1">#UDL</span>
<span class="kn">from</span> <span class="nn">vector_geology</span> <span class="kn">import</span> <span class="n">basic_stat</span><span class="p">,</span> <span class="n">geo</span>

<span class="c1"># PEL- Basic</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">tabulate</span> <span class="kn">import</span> <span class="n">tabulate</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># PEL - Plotting</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># PEL - Filtering</span>
<span class="kn">from</span> <span class="nn">scipy.signal</span> <span class="kn">import</span> <span class="n">butter</span><span class="p">,</span> <span class="n">filtfilt</span>

<span class="c1"># # PEL - Data selection, transformation, preprocessing</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">cross_val_score</span>

<span class="c1"># # PEL- ML algorithms</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span><span class="p">,</span> <span class="n">Lasso</span><span class="p">,</span> <span class="n">Ridge</span>
<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVR</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">GradientBoostingRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
<span class="kn">import</span> <span class="nn">xgboost</span> <span class="k">as</span> <span class="nn">xgb</span>

<span class="c1"># PEL - Metrics</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">,</span> <span class="n">r2_score</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">make_scorer</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">,</span> <span class="n">mean_squared_error</span>
</pre></div>
</div>
</section>
<section id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Link to this heading">¶</a></h2>
<p>Activation of qt GUI
Seed of random process</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">seed</span> <span class="o">=</span> <span class="mi">123</span>

<span class="c1"># Warning suppression</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="data-loading">
<h2>Data Loading<a class="headerlink" href="#data-loading" title="Link to this heading">¶</a></h2>
<p>features3, imputed features, data load</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Output/features3.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">features3</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Hole</th>
      <th>From</th>
      <th>Len</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
      <th>Form</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-1319-005</td>
      <td>265.77</td>
      <td>11.2</td>
      <td>2.610000</td>
      <td>5725.879959</td>
      <td>3073.767206</td>
      <td>0.108</td>
      <td>36.995337</td>
      <td>5489.392555</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-1319-005</td>
      <td>271.66</td>
      <td>11.8</td>
      <td>2.786624</td>
      <td>5514.000000</td>
      <td>2222.000000</td>
      <td>0.108</td>
      <td>26.060000</td>
      <td>4600.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-1319-005</td>
      <td>277.05</td>
      <td>10.3</td>
      <td>3.399000</td>
      <td>5754.000000</td>
      <td>2085.000000</td>
      <td>0.237</td>
      <td>17.520000</td>
      <td>10200.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-1319-005</td>
      <td>282.55</td>
      <td>11.2</td>
      <td>2.800579</td>
      <td>5773.000000</td>
      <td>2011.000000</td>
      <td>0.151</td>
      <td>28.130000</td>
      <td>5800.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-1319-005</td>
      <td>287.20</td>
      <td>10.8</td>
      <td>3.293000</td>
      <td>6034.000000</td>
      <td>2122.000000</td>
      <td>0.176</td>
      <td>6.880000</td>
      <td>15500.000000</td>
      <td>CALP</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Len</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>329.000000</td>
      <td>321.000000</td>
      <td>329.000000</td>
      <td>329.000000</td>
      <td>329.000000</td>
      <td>329.000000</td>
      <td>329.000000</td>
      <td>329.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>543.279696</td>
      <td>10.223364</td>
      <td>2.723043</td>
      <td>5501.096555</td>
      <td>2808.728436</td>
      <td>0.142841</td>
      <td>48.950658</td>
      <td>3401.316252</td>
    </tr>
    <tr>
      <th>std</th>
      <td>262.864370</td>
      <td>1.070127</td>
      <td>0.143224</td>
      <td>538.939658</td>
      <td>517.989081</td>
      <td>0.100134</td>
      <td>24.374350</td>
      <td>3623.480943</td>
    </tr>
    <tr>
      <th>min</th>
      <td>9.600000</td>
      <td>7.500000</td>
      <td>2.420000</td>
      <td>3009.000000</td>
      <td>1295.000000</td>
      <td>0.001000</td>
      <td>5.390000</td>
      <td>156.900000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>355.580000</td>
      <td>9.700000</td>
      <td>2.679000</td>
      <td>5266.000000</td>
      <td>2448.000000</td>
      <td>0.064000</td>
      <td>31.808800</td>
      <td>1200.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>547.800000</td>
      <td>10.000000</td>
      <td>2.707000</td>
      <td>5587.000000</td>
      <td>2994.000000</td>
      <td>0.115000</td>
      <td>46.200000</td>
      <td>2300.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>750.000000</td>
      <td>10.400000</td>
      <td>2.731000</td>
      <td>5849.000000</td>
      <td>3231.000000</td>
      <td>0.201000</td>
      <td>65.470000</td>
      <td>4200.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1049.200000</td>
      <td>18.000000</td>
      <td>3.650000</td>
      <td>6478.000000</td>
      <td>3740.000000</td>
      <td>0.545000</td>
      <td>171.730000</td>
      <td>23900.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Columns in the features3</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Index([&#39;Hole&#39;, &#39;From&#39;, &#39;Len&#39;, &#39;Den&#39;, &#39;Vp&#39;, &#39;Vs&#39;, &#39;Mag&#39;, &#39;Ip&#39;, &#39;Res&#39;, &#39;Form&#39;], dtype=&#39;object&#39;)
</pre></div>
</div>
<p>Imputed features of borehole TC-3660-008</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3_8</span> <span class="o">=</span> <span class="n">features3</span><span class="p">[</span><span class="n">features3</span><span class="o">.</span><span class="n">Hole</span><span class="o">==</span><span class="s1">&#39;TC-3660-008&#39;</span><span class="p">]</span>
<span class="n">features3_8</span> <span class="o">=</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">features3_8</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Hole</th>
      <th>From</th>
      <th>Len</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
      <th>Form</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-3660-008</td>
      <td>9.60</td>
      <td>9.9</td>
      <td>2.690</td>
      <td>6226.000000</td>
      <td>3426.000000</td>
      <td>0.545</td>
      <td>12.190000</td>
      <td>18200.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-3660-008</td>
      <td>12.86</td>
      <td>9.5</td>
      <td>2.702</td>
      <td>6376.000000</td>
      <td>3467.000000</td>
      <td>0.435</td>
      <td>11.260000</td>
      <td>23000.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-3660-008</td>
      <td>18.36</td>
      <td>10.4</td>
      <td>2.676</td>
      <td>5810.000000</td>
      <td>3180.000000</td>
      <td>0.377</td>
      <td>19.710000</td>
      <td>6900.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-3660-008</td>
      <td>22.90</td>
      <td>10.2</td>
      <td>2.686</td>
      <td>6415.000000</td>
      <td>3434.000000</td>
      <td>0.143</td>
      <td>26.681228</td>
      <td>8414.846011</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-3660-008</td>
      <td>24.50</td>
      <td>10.3</td>
      <td>2.693</td>
      <td>6095.000000</td>
      <td>3388.000000</td>
      <td>0.159</td>
      <td>15.040000</td>
      <td>13500.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>163</th>
      <td>TC-3660-008</td>
      <td>814.55</td>
      <td>9.6</td>
      <td>2.763</td>
      <td>5680.000000</td>
      <td>3179.000000</td>
      <td>0.158</td>
      <td>70.940000</td>
      <td>481.100000</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>164</th>
      <td>TC-3660-008</td>
      <td>819.92</td>
      <td>NaN</td>
      <td>2.649</td>
      <td>5222.938307</td>
      <td>2668.541294</td>
      <td>0.024</td>
      <td>54.048890</td>
      <td>879.289776</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>165</th>
      <td>TC-3660-008</td>
      <td>825.60</td>
      <td>9.9</td>
      <td>2.762</td>
      <td>5593.000000</td>
      <td>1787.000000</td>
      <td>0.337</td>
      <td>78.440000</td>
      <td>334.600000</td>
      <td>PAL</td>
    </tr>
    <tr>
      <th>166</th>
      <td>TC-3660-008</td>
      <td>828.80</td>
      <td>9.9</td>
      <td>2.804</td>
      <td>5858.000000</td>
      <td>1964.000000</td>
      <td>0.311</td>
      <td>73.730000</td>
      <td>466.500000</td>
      <td>PAL</td>
    </tr>
    <tr>
      <th>167</th>
      <td>TC-3660-008</td>
      <td>833.40</td>
      <td>10.1</td>
      <td>2.735</td>
      <td>5805.000000</td>
      <td>3217.000000</td>
      <td>0.308</td>
      <td>33.860000</td>
      <td>2300.000000</td>
      <td>PAL</td>
    </tr>
  </tbody>
</table>
<p>168 rows × 10 columns</p>
</div>
</div>
<br />
<br /><p>Depth information of feature3</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Petrophysical features of TC-360-008&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top:&#39;</span><span class="p">,</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Base:&#39;</span><span class="p">,</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">features3_8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Length:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">features3_8</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Range:&#39;</span><span class="p">,</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">features3_8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;First step: </span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Mean step</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">features3_8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean step: </span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">steps</span><span class="p">)))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Petrophysical features of TC-360-008

Top: 9.600000000000025
Base: 833.4

Length: 168
Range: 823.8

First step: 3.3
Mean step: 4.93
</pre></div>
</div>
<p>Legacy GR data of different holes</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">dotenv</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">()</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;PATH_TO_COLLINSTOWN_PETRO&quot;</span><span class="p">)</span>
<span class="n">gr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">base_path</span><span class="si">}</span><span class="s1">/collinstown_Gamma.csv&#39;</span><span class="p">)</span>
<span class="n">gr</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Python-dotenv could not parse statement starting at line 13
Python-dotenv could not parse statement starting at line 14
Python-dotenv could not parse statement starting at line 15
Python-dotenv could not parse statement starting at line 16
Python-dotenv could not parse statement starting at line 17
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>HOLEID</th>
      <th>PROJECTCODE</th>
      <th>DEPTHSTEP</th>
      <th>RUN</th>
      <th>PRIORITY</th>
      <th>DEPTH</th>
      <th>GeoPhys_NGAM_API</th>
      <th>GeoPhys_NGAM_NLF50</th>
      <th>Gamma_Temp</th>
      <th>Gamma_VBatt</th>
      <th>GeoPhys_NGAM_Speed</th>
      <th>PL_DER</th>
      <th>GeoPhys_Date_dr</th>
      <th>Logging_Method_dr</th>
      <th>Calibration_dr</th>
      <th>Diameter_dr</th>
      <th>IntegrationPeriod_dr</th>
      <th>WheelDiameter_dr</th>
      <th>Gamma_Overlap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-3660-007</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>0.7</td>
      <td>26.9</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.31</td>
      <td>8.57</td>
      <td>3660</td>
      <td>6-Sep-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>N</td>
      <td>800</td>
      <td>100.454</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-3660-007</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>0.8</td>
      <td>26.8</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.31</td>
      <td>8.58</td>
      <td>3660</td>
      <td>6-Sep-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>N</td>
      <td>800</td>
      <td>100.454</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-3660-007</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>0.9</td>
      <td>18.1</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.32</td>
      <td>8.46</td>
      <td>3660</td>
      <td>6-Sep-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>N</td>
      <td>800</td>
      <td>100.454</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-3660-007</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>19.4</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.32</td>
      <td>8.43</td>
      <td>3660</td>
      <td>6-Sep-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>N</td>
      <td>800</td>
      <td>100.454</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-3660-007</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>1.1</td>
      <td>19.5</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.32</td>
      <td>8.51</td>
      <td>3660</td>
      <td>6-Sep-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>N</td>
      <td>800</td>
      <td>100.454</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Different holes in the legacy GR dataframe</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gr</span><span class="o">.</span><span class="n">HOLEID</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([&#39;TC-3660-007&#39;, &#39;TC-3660-008&#39;, &#39;TC-3839-002&#39;], dtype=object)
</pre></div>
</div>
<p>Legacy GR of borehole TC-3660-008</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gr8</span> <span class="o">=</span> <span class="n">gr</span><span class="p">[</span><span class="n">gr</span><span class="o">.</span><span class="n">HOLEID</span> <span class="o">==</span> <span class="s1">&#39;TC-3660-008&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gr8</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>HOLEID</th>
      <th>PROJECTCODE</th>
      <th>DEPTHSTEP</th>
      <th>RUN</th>
      <th>PRIORITY</th>
      <th>DEPTH</th>
      <th>GeoPhys_NGAM_API</th>
      <th>GeoPhys_NGAM_NLF50</th>
      <th>Gamma_Temp</th>
      <th>Gamma_VBatt</th>
      <th>GeoPhys_NGAM_Speed</th>
      <th>PL_DER</th>
      <th>GeoPhys_Date_dr</th>
      <th>Logging_Method_dr</th>
      <th>Calibration_dr</th>
      <th>Diameter_dr</th>
      <th>IntegrationPeriod_dr</th>
      <th>WheelDiameter_dr</th>
      <th>Gamma_Overlap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>-0.2</td>
      <td>27.3</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.14</td>
      <td>7.37</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>-0.1</td>
      <td>16.2</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.14</td>
      <td>7.94</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>0.0</td>
      <td>19.8</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.14</td>
      <td>7.96</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>0.1</td>
      <td>22.6</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.14</td>
      <td>7.87</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>0.2</td>
      <td>30.6</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.14</td>
      <td>7.77</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>8718</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>830.4</td>
      <td>72.5</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>6.58</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8719</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>830.5</td>
      <td>80.3</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>6.20</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8720</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>830.6</td>
      <td>77.1</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>5.02</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8721</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>830.7</td>
      <td>72.5</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>4.55</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8722</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>830.8</td>
      <td>52.6</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>3.66</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>8723 rows × 19 columns</p>
</div>
</div>
<br />
<br /><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gr8</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DEPTHSTEP</th>
      <th>RUN</th>
      <th>PRIORITY</th>
      <th>DEPTH</th>
      <th>GeoPhys_NGAM_API</th>
      <th>GeoPhys_NGAM_NLF50</th>
      <th>Gamma_Temp</th>
      <th>Gamma_VBatt</th>
      <th>GeoPhys_NGAM_Speed</th>
      <th>PL_DER</th>
      <th>Calibration_dr</th>
      <th>IntegrationPeriod_dr</th>
      <th>WheelDiameter_dr</th>
      <th>Gamma_Overlap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>8.723000e+03</td>
      <td>8723.000000</td>
      <td>8723.0</td>
      <td>8723.000000</td>
      <td>8723.000000</td>
      <td>0.0</td>
      <td>8723.0</td>
      <td>8723.000000</td>
      <td>8723.000000</td>
      <td>8723.0</td>
      <td>8.723000e+03</td>
      <td>8723.0</td>
      <td>8.723000e+03</td>
      <td>8723.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>-1.000000e-01</td>
      <td>1.437006</td>
      <td>1.0</td>
      <td>417.895369</td>
      <td>36.886003</td>
      <td>NaN</td>
      <td>25.0</td>
      <td>8.251908</td>
      <td>9.070378</td>
      <td>3660.0</td>
      <td>5.170728e-01</td>
      <td>800.0</td>
      <td>1.004540e+02</td>
      <td>0.047117</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.387858e-17</td>
      <td>0.496044</td>
      <td>0.0</td>
      <td>234.501159</td>
      <td>17.433525</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>0.059756</td>
      <td>0.815250</td>
      <td>0.0</td>
      <td>1.110287e-16</td>
      <td>0.0</td>
      <td>2.842334e-14</td>
      <td>0.211901</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-1.000000e-01</td>
      <td>1.000000</td>
      <td>1.0</td>
      <td>-0.200000</td>
      <td>2.800000</td>
      <td>NaN</td>
      <td>25.0</td>
      <td>8.140000</td>
      <td>0.610000</td>
      <td>3660.0</td>
      <td>5.170728e-01</td>
      <td>800.0</td>
      <td>1.004540e+02</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>-1.000000e-01</td>
      <td>1.000000</td>
      <td>1.0</td>
      <td>217.850000</td>
      <td>24.400000</td>
      <td>NaN</td>
      <td>25.0</td>
      <td>8.200000</td>
      <td>8.720000</td>
      <td>3660.0</td>
      <td>5.170728e-01</td>
      <td>800.0</td>
      <td>1.004540e+02</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>-1.000000e-01</td>
      <td>1.000000</td>
      <td>1.0</td>
      <td>435.900000</td>
      <td>33.500000</td>
      <td>NaN</td>
      <td>25.0</td>
      <td>8.250000</td>
      <td>9.190000</td>
      <td>3660.0</td>
      <td>5.170728e-01</td>
      <td>800.0</td>
      <td>1.004540e+02</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>-1.000000e-01</td>
      <td>2.000000</td>
      <td>1.0</td>
      <td>612.750000</td>
      <td>45.200000</td>
      <td>NaN</td>
      <td>25.0</td>
      <td>8.300000</td>
      <td>9.565000</td>
      <td>3660.0</td>
      <td>5.170728e-01</td>
      <td>800.0</td>
      <td>1.004540e+02</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>-1.000000e-01</td>
      <td>2.000000</td>
      <td>1.0</td>
      <td>830.800000</td>
      <td>119.800000</td>
      <td>NaN</td>
      <td>25.0</td>
      <td>8.370000</td>
      <td>19.680000</td>
      <td>3660.0</td>
      <td>5.170728e-01</td>
      <td>800.0</td>
      <td>1.004540e+02</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Depth information of the legacy GR</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Legacy GR of TC-360-008&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top:&#39;</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Base:&#39;</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Length:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Range:&#39;</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;First step: </span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>

<span class="c1"># Mean step</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean step: </span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">steps</span><span class="p">)))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Legacy GR of TC-360-008

Top: -0.2
Base: 830.8

Length: 8723
Range: 830.8

First step: 0.1
Mean step: 0.10
</pre></div>
</div>
</section>
<section id="data-merging">
<h2>Data Merging<a class="headerlink" href="#data-merging" title="Link to this heading">¶</a></h2>
<p>To model a new GR in borehole TC-1319-005, the legacy GR (gr8) and petrophysical data of borehole TC-3660-008 (feature3_8) have to be integrated into a single dataframe, free of NaNs.</p>
<section id="depth-equalization">
<h3>Depth Equalization<a class="headerlink" href="#depth-equalization" title="Link to this heading">¶</a></h3>
<p>The first step in merging the process of the legacy GR into the petrophysical data of borehole TC-3660-008 is to equalize the depths of both dataframes by the use of conditional expressions:</p>
<p>Equalizing depths in feature3</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3_8</span> <span class="o">=</span> <span class="n">features3_8</span><span class="p">[</span><span class="n">features3_8</span><span class="o">.</span><span class="n">From</span> <span class="o">&lt;=</span> <span class="mf">830.8</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">features3_8</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Hole</th>
      <th>From</th>
      <th>Len</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
      <th>Form</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-3660-008</td>
      <td>9.60</td>
      <td>9.9</td>
      <td>2.690</td>
      <td>6226.000000</td>
      <td>3426.000000</td>
      <td>0.545</td>
      <td>12.190000</td>
      <td>18200.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-3660-008</td>
      <td>12.86</td>
      <td>9.5</td>
      <td>2.702</td>
      <td>6376.000000</td>
      <td>3467.000000</td>
      <td>0.435</td>
      <td>11.260000</td>
      <td>23000.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-3660-008</td>
      <td>18.36</td>
      <td>10.4</td>
      <td>2.676</td>
      <td>5810.000000</td>
      <td>3180.000000</td>
      <td>0.377</td>
      <td>19.710000</td>
      <td>6900.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-3660-008</td>
      <td>22.90</td>
      <td>10.2</td>
      <td>2.686</td>
      <td>6415.000000</td>
      <td>3434.000000</td>
      <td>0.143</td>
      <td>26.681228</td>
      <td>8414.846011</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-3660-008</td>
      <td>24.50</td>
      <td>10.3</td>
      <td>2.693</td>
      <td>6095.000000</td>
      <td>3388.000000</td>
      <td>0.159</td>
      <td>15.040000</td>
      <td>13500.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>162</th>
      <td>TC-3660-008</td>
      <td>809.47</td>
      <td>9.5</td>
      <td>2.786</td>
      <td>5621.000000</td>
      <td>2334.000000</td>
      <td>0.105</td>
      <td>55.200000</td>
      <td>706.500000</td>
      <td>P</td>
    </tr>
    <tr>
      <th>163</th>
      <td>TC-3660-008</td>
      <td>814.55</td>
      <td>9.6</td>
      <td>2.763</td>
      <td>5680.000000</td>
      <td>3179.000000</td>
      <td>0.158</td>
      <td>70.940000</td>
      <td>481.100000</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>164</th>
      <td>TC-3660-008</td>
      <td>819.92</td>
      <td>NaN</td>
      <td>2.649</td>
      <td>5222.938307</td>
      <td>2668.541294</td>
      <td>0.024</td>
      <td>54.048890</td>
      <td>879.289776</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>165</th>
      <td>TC-3660-008</td>
      <td>825.60</td>
      <td>9.9</td>
      <td>2.762</td>
      <td>5593.000000</td>
      <td>1787.000000</td>
      <td>0.337</td>
      <td>78.440000</td>
      <td>334.600000</td>
      <td>PAL</td>
    </tr>
    <tr>
      <th>166</th>
      <td>TC-3660-008</td>
      <td>828.80</td>
      <td>9.9</td>
      <td>2.804</td>
      <td>5858.000000</td>
      <td>1964.000000</td>
      <td>0.311</td>
      <td>73.730000</td>
      <td>466.500000</td>
      <td>PAL</td>
    </tr>
  </tbody>
</table>
<p>167 rows × 10 columns</p>
</div>
</div>
<br />
<br /><p>New depth information of feature3</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Petrophysical features of TC-360-008&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top:&#39;</span><span class="p">,</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Base:&#39;</span><span class="p">,</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">features3_8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Length:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">features3_8</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Range:&#39;</span><span class="p">,</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">features3_8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;First step: </span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Mean step</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">features3_8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean step: </span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">steps</span><span class="p">)))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Petrophysical features of TC-360-008

Top: 9.600000000000025
Base: 828.8

Length: 167
Range: 819.1999999999999

First step: 3.3
Mean step: 4.93
</pre></div>
</div>
<p>Equalizing depths in the legacy GR</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gr8</span> <span class="o">=</span> <span class="n">gr8</span><span class="p">[(</span><span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span> <span class="o">&gt;=</span> <span class="mf">9.6</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span> <span class="o">&lt;=</span> <span class="mf">828.8</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gr8</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>HOLEID</th>
      <th>PROJECTCODE</th>
      <th>DEPTHSTEP</th>
      <th>RUN</th>
      <th>PRIORITY</th>
      <th>DEPTH</th>
      <th>GeoPhys_NGAM_API</th>
      <th>GeoPhys_NGAM_NLF50</th>
      <th>Gamma_Temp</th>
      <th>Gamma_VBatt</th>
      <th>GeoPhys_NGAM_Speed</th>
      <th>PL_DER</th>
      <th>GeoPhys_Date_dr</th>
      <th>Logging_Method_dr</th>
      <th>Calibration_dr</th>
      <th>Diameter_dr</th>
      <th>IntegrationPeriod_dr</th>
      <th>WheelDiameter_dr</th>
      <th>Gamma_Overlap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>9.6</td>
      <td>36.5</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.15</td>
      <td>9.17</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>9.7</td>
      <td>37.9</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.15</td>
      <td>9.13</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>9.8</td>
      <td>37.0</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.15</td>
      <td>9.34</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>9.9</td>
      <td>33.6</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.15</td>
      <td>9.44</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>1</td>
      <td>1</td>
      <td>10.0</td>
      <td>32.6</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.15</td>
      <td>9.43</td>
      <td>3660</td>
      <td>23-Oct-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>8600</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>828.4</td>
      <td>89.6</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>8.29</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8601</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>828.5</td>
      <td>88.3</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>8.31</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8602</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>828.6</td>
      <td>74.2</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>8.31</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8603</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>828.7</td>
      <td>84.0</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>7.83</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8604</th>
      <td>TC-3660-008</td>
      <td>Collinstown</td>
      <td>-0.1</td>
      <td>2</td>
      <td>1</td>
      <td>828.8</td>
      <td>70.6</td>
      <td>NaN</td>
      <td>25</td>
      <td>8.33</td>
      <td>7.37</td>
      <td>3660</td>
      <td>04-Nov-2019</td>
      <td>IN_ROD</td>
      <td>0.517073</td>
      <td>B</td>
      <td>800</td>
      <td>100.454</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>8605 rows × 19 columns</p>
</div>
</div>
<br />
<br /><p>New depth information of the legacy GR</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Legacy GR of TC-360-008&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top:&#39;</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Base:&#39;</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Length:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Range:&#39;</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;First step: </span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>

<span class="c1"># Mean step</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">gr8</span><span class="o">.</span><span class="n">DEPTH</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean step: </span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">steps</span><span class="p">)))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Legacy GR of TC-360-008

Top: 9.6
Base: 828.8

Length: 8605
Range: 819.0

First step: 0.1
Mean step: 0.10
</pre></div>
</div>
</section>
<section id="filtering-and-dowsampling">
<h3>Filtering and Dowsampling<a class="headerlink" href="#filtering-and-dowsampling" title="Link to this heading">¶</a></h3>
<p>Now that the depths of the legacy GR and the petrophysical data of borehole TC-3660-008 have been equalized, the next challenge is to merge the legacy GR into the petrophysical data. This involves condensing the 8605 legacy GR values into a new petrophysical feature with 167 values that can be used in the models. This task has been archived by combining a Butterwort filter and a downsampling function, an ideal combination for data with fast fluctuation such as the GR log (only downsampling produces a very spiky result). The effect of the filter, downsampling, and filter followed by downsampling can be appreciated at the end of this section.</p>
<p>Simplify the legacy GR</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gr8</span> <span class="o">=</span> <span class="n">gr8</span><span class="p">[[</span><span class="s1">&#39;DEPTH&#39;</span><span class="p">,</span> <span class="s1">&#39;GeoPhys_NGAM_API&#39;</span><span class="p">]]</span>
<span class="n">gr8</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DEPTH</th>
      <th>GeoPhys_NGAM_API</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.6</td>
      <td>36.5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.7</td>
      <td>37.9</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9.8</td>
      <td>37.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9.9</td>
      <td>33.6</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10.0</td>
      <td>32.6</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>8600</th>
      <td>828.4</td>
      <td>89.6</td>
    </tr>
    <tr>
      <th>8601</th>
      <td>828.5</td>
      <td>88.3</td>
    </tr>
    <tr>
      <th>8602</th>
      <td>828.6</td>
      <td>74.2</td>
    </tr>
    <tr>
      <th>8603</th>
      <td>828.7</td>
      <td>84.0</td>
    </tr>
    <tr>
      <th>8604</th>
      <td>828.8</td>
      <td>70.6</td>
    </tr>
  </tbody>
</table>
<p>8605 rows × 2 columns</p>
</div>
</div>
<br />
<br /><p>Rename series in the legacy GR</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gr8</span> <span class="o">=</span> <span class="n">gr8</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;DEPTH&#39;</span><span class="p">:</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="s1">&#39;GeoPhys_NGAM_API&#39;</span><span class="p">:</span><span class="s1">&#39;gr&#39;</span><span class="p">})</span>
<span class="n">gr8</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>depth</th>
      <th>gr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.6</td>
      <td>36.5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.7</td>
      <td>37.9</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9.8</td>
      <td>37.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9.9</td>
      <td>33.6</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10.0</td>
      <td>32.6</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>8600</th>
      <td>828.4</td>
      <td>89.6</td>
    </tr>
    <tr>
      <th>8601</th>
      <td>828.5</td>
      <td>88.3</td>
    </tr>
    <tr>
      <th>8602</th>
      <td>828.6</td>
      <td>74.2</td>
    </tr>
    <tr>
      <th>8603</th>
      <td>828.7</td>
      <td>84.0</td>
    </tr>
    <tr>
      <th>8604</th>
      <td>828.8</td>
      <td>70.6</td>
    </tr>
  </tbody>
</table>
<p>8605 rows × 2 columns</p>
</div>
</div>
<br />
<br /><p>Downsampling the legacy GR but keeping the first and last value</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">reduc</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">gr8</span><span class="p">))</span> <span class="o">/</span> <span class="mi">165</span><span class="p">)</span>

<span class="n">gr8_middle</span> <span class="o">=</span> <span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[::</span><span class="n">reduc</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">gr8_down</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">gr8_middle</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]])</span>
<span class="n">gr8_down</span> <span class="o">=</span> <span class="n">gr8_down</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gr8_down</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>depth</th>
      <th>gr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.6</td>
      <td>36.5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.7</td>
      <td>37.9</td>
    </tr>
    <tr>
      <th>2</th>
      <td>14.9</td>
      <td>38.8</td>
    </tr>
    <tr>
      <th>3</th>
      <td>20.1</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>25.3</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>163</th>
      <td>810.9</td>
      <td>27.2</td>
    </tr>
    <tr>
      <th>164</th>
      <td>816.1</td>
      <td>63.5</td>
    </tr>
    <tr>
      <th>165</th>
      <td>821.3</td>
      <td>49.8</td>
    </tr>
    <tr>
      <th>166</th>
      <td>826.5</td>
      <td>72.8</td>
    </tr>
    <tr>
      <th>167</th>
      <td>828.8</td>
      <td>70.6</td>
    </tr>
  </tbody>
</table>
<p>168 rows × 2 columns</p>
</div>
</div>
<br />
<br /><p>Butterworth filter on the legacy GR</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">butter</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Wn</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">btype</span><span class="o">=</span><span class="s1">&#39;low&#39;</span><span class="p">)</span>
<span class="n">filtered_gr</span> <span class="o">=</span> <span class="n">filtfilt</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">gr</span><span class="p">)</span>

<span class="n">gr8</span><span class="p">[</span><span class="s1">&#39;gr_fil&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">filtered_gr</span>
<span class="n">gr8</span> <span class="o">=</span> <span class="n">gr8</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gr8</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>depth</th>
      <th>gr</th>
      <th>gr_fil</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.6</td>
      <td>36.5</td>
      <td>30.578377</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.7</td>
      <td>37.9</td>
      <td>30.455095</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9.8</td>
      <td>37.0</td>
      <td>30.326338</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9.9</td>
      <td>33.6</td>
      <td>30.192920</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10.0</td>
      <td>32.6</td>
      <td>30.055744</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>8600</th>
      <td>828.4</td>
      <td>89.6</td>
      <td>76.752640</td>
    </tr>
    <tr>
      <th>8601</th>
      <td>828.5</td>
      <td>88.3</td>
      <td>76.716145</td>
    </tr>
    <tr>
      <th>8602</th>
      <td>828.6</td>
      <td>74.2</td>
      <td>76.680680</td>
    </tr>
    <tr>
      <th>8603</th>
      <td>828.7</td>
      <td>84.0</td>
      <td>76.646916</td>
    </tr>
    <tr>
      <th>8604</th>
      <td>828.8</td>
      <td>70.6</td>
      <td>76.615594</td>
    </tr>
  </tbody>
</table>
<p>8605 rows × 3 columns</p>
</div>
</div>
<br />
<br /><p>Downsampling the filtered GR</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gr8_fil_down_middle</span> <span class="o">=</span> <span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[::</span><span class="n">reduc</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">gr8_fil_down</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">gr8_fil_down_middle</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]])</span>

<span class="c1"># Sort by depth</span>
<span class="n">gr8_fil_down</span> <span class="o">=</span> <span class="n">gr8_fil_down</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gr8_fil_down</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>depth</th>
      <th>gr</th>
      <th>gr_fil</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.6</td>
      <td>36.5</td>
      <td>30.578377</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.7</td>
      <td>37.9</td>
      <td>30.455095</td>
    </tr>
    <tr>
      <th>2</th>
      <td>14.9</td>
      <td>38.8</td>
      <td>34.024174</td>
    </tr>
    <tr>
      <th>3</th>
      <td>20.1</td>
      <td>25.0</td>
      <td>23.740136</td>
    </tr>
    <tr>
      <th>4</th>
      <td>25.3</td>
      <td>15.0</td>
      <td>24.472588</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>163</th>
      <td>810.9</td>
      <td>27.2</td>
      <td>59.538951</td>
    </tr>
    <tr>
      <th>164</th>
      <td>816.1</td>
      <td>63.5</td>
      <td>76.511278</td>
    </tr>
    <tr>
      <th>165</th>
      <td>821.3</td>
      <td>49.8</td>
      <td>68.944642</td>
    </tr>
    <tr>
      <th>166</th>
      <td>826.5</td>
      <td>72.8</td>
      <td>77.107392</td>
    </tr>
    <tr>
      <th>167</th>
      <td>828.8</td>
      <td>70.6</td>
      <td>76.615594</td>
    </tr>
  </tbody>
</table>
<p>168 rows × 3 columns</p>
</div>
</div>
<br />
<br /><p>Plot of filter and/or downsampling</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">gr8</span><span class="o">.</span><span class="n">gr</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Original&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;GR (API)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Depth (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">850</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">850</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">gr8_down</span><span class="o">.</span><span class="n">gr</span><span class="p">,</span> <span class="n">gr8_down</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Down Samplig&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">gr8</span><span class="o">.</span><span class="n">gr_fil</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Butterworth Filtered&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">gr8_fil_down</span><span class="o">.</span><span class="n">gr_fil</span><span class="p">,</span> <span class="n">gr8_fil_down</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Butterworth Filtered &amp; Down Sampling&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;GR (API)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Depth (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">850</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">850</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Borehole TC-3660-008 GR&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_03_no_3_modeling_001.png" srcset="../../_images/sphx_glr_03_no_3_modeling_001.png" alt="Borehole TC-3660-008 GR" class = "sphx-glr-single-img"/></section>
<section id="integrated-dataframe">
<h3>Integrated Dataframe<a class="headerlink" href="#integrated-dataframe" title="Link to this heading">¶</a></h3>
<p>As the downsampling gave 168 values, we dropped the central value to reach 167 (the length of the petrophysical dataset) and then fused the filter and downsampled GR into the petrophysical data of borehole TC-3660-008.</p>
<p>Drop of central value in the filter and downsampled GR</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">del_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">gr8_fil_down</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
<span class="n">gr8_fil_down</span> <span class="o">=</span> <span class="n">gr8_fil_down</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">del_index</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gr8_fil_down</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>depth</th>
      <th>gr</th>
      <th>gr_fil</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.6</td>
      <td>36.5</td>
      <td>30.578377</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.7</td>
      <td>37.9</td>
      <td>30.455095</td>
    </tr>
    <tr>
      <th>2</th>
      <td>14.9</td>
      <td>38.8</td>
      <td>34.024174</td>
    </tr>
    <tr>
      <th>3</th>
      <td>20.1</td>
      <td>25.0</td>
      <td>23.740136</td>
    </tr>
    <tr>
      <th>4</th>
      <td>25.3</td>
      <td>15.0</td>
      <td>24.472588</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>162</th>
      <td>810.9</td>
      <td>27.2</td>
      <td>59.538951</td>
    </tr>
    <tr>
      <th>163</th>
      <td>816.1</td>
      <td>63.5</td>
      <td>76.511278</td>
    </tr>
    <tr>
      <th>164</th>
      <td>821.3</td>
      <td>49.8</td>
      <td>68.944642</td>
    </tr>
    <tr>
      <th>165</th>
      <td>826.5</td>
      <td>72.8</td>
      <td>77.107392</td>
    </tr>
    <tr>
      <th>166</th>
      <td>828.8</td>
      <td>70.6</td>
      <td>76.615594</td>
    </tr>
  </tbody>
</table>
<p>167 rows × 3 columns</p>
</div>
</div>
<br />
<br /><p>Final integrated dataframe without NaNs</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3_8</span><span class="p">[</span><span class="s1">&#39;GR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gr8_fil_down</span><span class="o">.</span><span class="n">gr_fil</span>
<span class="n">features3_8</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Hole</th>
      <th>From</th>
      <th>Len</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
      <th>Form</th>
      <th>GR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-3660-008</td>
      <td>9.60</td>
      <td>9.9</td>
      <td>2.690</td>
      <td>6226.000000</td>
      <td>3426.000000</td>
      <td>0.545</td>
      <td>12.190000</td>
      <td>18200.000000</td>
      <td>CALP</td>
      <td>30.578377</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-3660-008</td>
      <td>12.86</td>
      <td>9.5</td>
      <td>2.702</td>
      <td>6376.000000</td>
      <td>3467.000000</td>
      <td>0.435</td>
      <td>11.260000</td>
      <td>23000.000000</td>
      <td>CALP</td>
      <td>30.455095</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-3660-008</td>
      <td>18.36</td>
      <td>10.4</td>
      <td>2.676</td>
      <td>5810.000000</td>
      <td>3180.000000</td>
      <td>0.377</td>
      <td>19.710000</td>
      <td>6900.000000</td>
      <td>CALP</td>
      <td>34.024174</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-3660-008</td>
      <td>22.90</td>
      <td>10.2</td>
      <td>2.686</td>
      <td>6415.000000</td>
      <td>3434.000000</td>
      <td>0.143</td>
      <td>26.681228</td>
      <td>8414.846011</td>
      <td>CALP</td>
      <td>23.740136</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-3660-008</td>
      <td>24.50</td>
      <td>10.3</td>
      <td>2.693</td>
      <td>6095.000000</td>
      <td>3388.000000</td>
      <td>0.159</td>
      <td>15.040000</td>
      <td>13500.000000</td>
      <td>CALP</td>
      <td>24.472588</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>162</th>
      <td>TC-3660-008</td>
      <td>809.47</td>
      <td>9.5</td>
      <td>2.786</td>
      <td>5621.000000</td>
      <td>2334.000000</td>
      <td>0.105</td>
      <td>55.200000</td>
      <td>706.500000</td>
      <td>P</td>
      <td>59.538951</td>
    </tr>
    <tr>
      <th>163</th>
      <td>TC-3660-008</td>
      <td>814.55</td>
      <td>9.6</td>
      <td>2.763</td>
      <td>5680.000000</td>
      <td>3179.000000</td>
      <td>0.158</td>
      <td>70.940000</td>
      <td>481.100000</td>
      <td>LIS</td>
      <td>76.511278</td>
    </tr>
    <tr>
      <th>164</th>
      <td>TC-3660-008</td>
      <td>819.92</td>
      <td>NaN</td>
      <td>2.649</td>
      <td>5222.938307</td>
      <td>2668.541294</td>
      <td>0.024</td>
      <td>54.048890</td>
      <td>879.289776</td>
      <td>LIS</td>
      <td>68.944642</td>
    </tr>
    <tr>
      <th>165</th>
      <td>TC-3660-008</td>
      <td>825.60</td>
      <td>9.9</td>
      <td>2.762</td>
      <td>5593.000000</td>
      <td>1787.000000</td>
      <td>0.337</td>
      <td>78.440000</td>
      <td>334.600000</td>
      <td>PAL</td>
      <td>77.107392</td>
    </tr>
    <tr>
      <th>166</th>
      <td>TC-3660-008</td>
      <td>828.80</td>
      <td>9.9</td>
      <td>2.804</td>
      <td>5858.000000</td>
      <td>1964.000000</td>
      <td>0.311</td>
      <td>73.730000</td>
      <td>466.500000</td>
      <td>PAL</td>
      <td>76.615594</td>
    </tr>
  </tbody>
</table>
<p>167 rows × 11 columns</p>
</div>
</div>
<br />
<br /><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3_8</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 167 entries, 0 to 166
Data columns (total 11 columns):
 #   Column  Non-Null Count  Dtype
---  ------  --------------  -----
 0   Hole    167 non-null    object
 1   From    167 non-null    float64
 2   Len     159 non-null    float64
 3   Den     167 non-null    float64
 4   Vp      167 non-null    float64
 5   Vs      167 non-null    float64
 6   Mag     167 non-null    float64
 7   Ip      167 non-null    float64
 8   Res     167 non-null    float64
 9   Form    167 non-null    object
 10  GR      167 non-null    float64
dtypes: float64(9), object(2)
memory usage: 14.5+ KB
</pre></div>
</div>
</section>
</section>
<section id="modeling">
<h2>Modeling<a class="headerlink" href="#modeling" title="Link to this heading">¶</a></h2>
<p>Having the GR already integrated into the petrophysical data of borehole TC-3660-008 we are ready for modeling, which involves a regression analysis to generate predictive numerical outputs. The steps required are:</p>
<ul class="simple">
<li><p>Split the data for training and test or evaluation</p></li>
<li><p>Select and run the regression models</p></li>
<li><p>Test or evaluate the results of the different models</p></li>
<li><p>With the best ML algorithm, generate a synthetic GR for borehole TC-1319-005</p></li>
</ul>
<section id="data-split">
<h3>Data Split<a class="headerlink" href="#data-split" title="Link to this heading">¶</a></h3>
<p>Here we selected the petrophysical features and target (GR) in borehole TC-3660-008 for modeling, leaving 20% (34) of them aside for testing or evaluation of the regression algorithms.</p>
<p>features for modeling</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features_model_8</span> <span class="o">=</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Hole&#39;</span><span class="p">,</span> <span class="s1">&#39;Len&#39;</span><span class="p">,</span> <span class="s1">&#39;Form&#39;</span><span class="p">,</span> <span class="s1">&#39;GR&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">features_model_8</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">features_model_8</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>(167, 7)
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.60</td>
      <td>2.690</td>
      <td>6226.0</td>
      <td>3426.0</td>
      <td>0.545</td>
      <td>12.190000</td>
      <td>18200.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>12.86</td>
      <td>2.702</td>
      <td>6376.0</td>
      <td>3467.0</td>
      <td>0.435</td>
      <td>11.260000</td>
      <td>23000.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>18.36</td>
      <td>2.676</td>
      <td>5810.0</td>
      <td>3180.0</td>
      <td>0.377</td>
      <td>19.710000</td>
      <td>6900.000000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>22.90</td>
      <td>2.686</td>
      <td>6415.0</td>
      <td>3434.0</td>
      <td>0.143</td>
      <td>26.681228</td>
      <td>8414.846011</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.50</td>
      <td>2.693</td>
      <td>6095.0</td>
      <td>3388.0</td>
      <td>0.159</td>
      <td>15.040000</td>
      <td>13500.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>target or objetive</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">target_8</span> <span class="o">=</span> <span class="n">features3_8</span><span class="o">.</span><span class="n">GR</span>
<span class="n">target_8</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>0      30.578377
1      30.455095
2      34.024174
3      23.740136
4      24.472588
         ...
162    59.538951
163    76.511278
164    68.944642
165    77.107392
166    76.615594
Name: GR, Length: 167, dtype: float64
</pre></div>
</div>
<p>Split and shape of data for training and testing</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">features_model_8</span><span class="p">,</span> <span class="n">target_8</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>

<span class="c1"># X_train = np.array(X_train).flatten()</span>
<span class="c1"># y_train = np.array(y_train).flatten()</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;X_train shape:&#39;</span><span class="p">,</span> <span class="n">X_train</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;y_train shape:&#39;</span><span class="p">,</span> <span class="n">y_train</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;X_test shape:&#39;</span><span class="p">,</span> <span class="n">X_test</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;y_test shape:&#39;</span><span class="p">,</span> <span class="n">y_test</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>X_train shape: (133, 7)
y_train shape: (133,)
X_test shape: (34, 7)
y_test shape: (34,)
</pre></div>
</div>
<dl class="simple">
<dt>Regression Models</dt><dd></dd>
</dl>
<p>In this analysis, we trained and evaluated nine regression models, some of which are influenced by random processes (those using the <cite>random_state=seed</cite> argument). After testing with different seed values (e.g., 123, 456, 789), we observed variations in the top-performing model, typically alternating between Gradient Boosting, Extreme Gradient Boosting, and Random Forest. To mitigate this variability and ensure a more reliable evaluation, we implemented cross-validation for the calculation of the metrics.</p>
<p>Regression models and metrics with a fixed seed</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">seed</span> <span class="o">=</span> <span class="mi">123</span>

<span class="n">models</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;LR&#39;</span><span class="p">,</span> <span class="n">LinearRegression</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="n">Lasso</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="n">Ridge</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;SVR&#39;</span><span class="p">,</span> <span class="n">SVR</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;KNR&#39;</span><span class="p">,</span> <span class="n">KNeighborsRegressor</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;GB&#39;</span><span class="p">,</span> <span class="n">GradientBoostingRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;DTR&#39;</span><span class="p">,</span> <span class="n">DecisionTreeRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;RFR&#39;</span><span class="p">,</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;XGB&#39;</span><span class="p">,</span> <span class="n">xgb</span><span class="o">.</span><span class="n">XGBRegressor</span><span class="p">(</span><span class="n">objective</span> <span class="o">=</span><span class="s1">&#39;reg:squarederror&#39;</span><span class="p">)))</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">,</span> <span class="s1">&#39;Sum  of Residuals&#39;</span><span class="p">,</span> <span class="s1">&#39;MAE&#39;</span><span class="p">,</span> <span class="s1">&#39;MSE&#39;</span><span class="p">,</span> <span class="s1">&#39;RMSE&#39;</span><span class="p">,</span> <span class="s1">&#39;R2&#39;</span><span class="p">]</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
    <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="n">predict</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

    <span class="n">sum_residual</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">y_test</span> <span class="o">-</span> <span class="n">predict</span><span class="p">)</span>
    <span class="n">mae</span> <span class="o">=</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predict</span><span class="p">)</span>
    <span class="n">mse</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predict</span><span class="p">)</span>
    <span class="n">rmse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mse</span><span class="p">)</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>

    <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">name</span><span class="p">,</span> <span class="n">sum_residual</span><span class="p">,</span> <span class="n">mae</span><span class="p">,</span> <span class="n">mse</span><span class="p">,</span> <span class="n">rmse</span><span class="p">,</span> <span class="n">score</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Seed:&#39;</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tabulate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;fancy_outline&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Seed: 123
╒═════════╤═════════════════════╤══════════╤══════════╤══════════╤════════════╕
│ Model   │   Sum  of Residuals │      MAE │      MSE │     RMSE │         R2 │
╞═════════╪═════════════════════╪══════════╪══════════╪══════════╪════════════╡
│ LR      │            -4.86117 │  8.93602 │ 129.384  │ 11.3747  │  0.230243  │
│ L       │            11.9249  │  8.86367 │ 136.354  │ 11.6771  │  0.188777  │
│ R       │             9.17722 │  8.87722 │ 135.115  │ 11.6239  │  0.196147  │
│ SVR     │           165.92    │ 10.0965  │ 182.715  │ 13.5172  │ -0.0870428 │
│ KNR     │            44.6092  │  8.80595 │ 153.988  │ 12.4092  │  0.0838649 │
│ GB      │           -18.2136  │  7.03068 │  73.9925 │  8.60189 │  0.55979   │
│ DTR     │           -34.3359  │ 12.1705  │ 210.477  │ 14.5078  │ -0.252209  │
│ RFR     │           -11.9149  │  7.9933  │ 100.311  │ 10.0155  │  0.403212  │
│ XGB     │           -55.5957  │  7.40284 │  82.3656 │  9.07555 │  0.509975  │
╘═════════╧═════════════════════╧══════════╧══════════╧══════════╧════════════╛
</pre></div>
</div>
<p>Regression models and metrics with a fixed seed and cross-validation</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">seed</span> <span class="o">=</span> <span class="mi">123</span>

<span class="n">models</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;LR&#39;</span><span class="p">,</span> <span class="n">LinearRegression</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="n">Lasso</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="n">Ridge</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;SVR&#39;</span><span class="p">,</span> <span class="n">SVR</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;KNR&#39;</span><span class="p">,</span> <span class="n">KNeighborsRegressor</span><span class="p">()))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;GB&#39;</span><span class="p">,</span> <span class="n">GradientBoostingRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;DTR&#39;</span><span class="p">,</span> <span class="n">DecisionTreeRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;RFR&#39;</span><span class="p">,</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)))</span>
<span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;XGB&#39;</span><span class="p">,</span> <span class="n">xgb</span><span class="o">.</span><span class="n">XGBRegressor</span><span class="p">(</span><span class="n">objective</span> <span class="o">=</span><span class="s1">&#39;reg:squarederror&#39;</span><span class="p">)))</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">,</span> <span class="s1">&#39;MAE&#39;</span><span class="p">,</span> <span class="s1">&#39;MSE&#39;</span><span class="p">,</span> <span class="s1">&#39;RMSE&#39;</span><span class="p">,</span> <span class="s1">&#39;R2&#39;</span><span class="p">]</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">n_folds</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">rmse_scorer</span> <span class="o">=</span> <span class="n">make_scorer</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)))</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
    <span class="n">scores_mae</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">n_folds</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;neg_mean_absolute_error&#39;</span><span class="p">)</span>
    <span class="n">scores_mse</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">n_folds</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;neg_mean_squared_error&#39;</span><span class="p">)</span>
    <span class="n">scores_rmse</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">n_folds</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">rmse_scorer</span><span class="p">)</span>
    <span class="n">scores_r2</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">n_folds</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;r2&#39;</span><span class="p">)</span>

    <span class="n">mae</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">scores_mae</span><span class="p">)</span>
    <span class="n">mse</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">scores_mse</span><span class="p">)</span>
    <span class="n">rmse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">scores_rmse</span><span class="p">)</span>
    <span class="n">r2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">scores_r2</span><span class="p">)</span>

    <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">name</span><span class="p">,</span> <span class="n">mae</span><span class="p">,</span> <span class="n">mse</span><span class="p">,</span> <span class="n">rmse</span><span class="p">,</span> <span class="n">r2</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Seed:&#39;</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tabulate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;fancy_outline&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Seed: 123
╒═════════╤═════════╤══════════╤══════════╤═══════════╕
│ Model   │     MAE │      MSE │     RMSE │        R2 │
╞═════════╪═════════╪══════════╪══════════╪═══════════╡
│ LR      │ 7.11785 │  92.1091 │  9.4983  │ 0.268285  │
│ L       │ 7.30283 │  94.0936 │  9.60407 │ 0.252065  │
│ R       │ 7.2349  │  93.1695 │  9.55375 │ 0.259637  │
│ SVR     │ 7.88615 │ 124.49   │ 11.1176  │ 0.0328943 │
│ KNR     │ 8.07405 │ 114.013  │ 10.6201  │ 0.106625  │
│ GB      │ 7.14677 │ 104.942  │ 10.1178  │ 0.183119  │
│ DTR     │ 8.12116 │ 128.029  │ 11.1078  │ 0.0187    │
│ RFR     │ 7.31101 │  97.9016 │  9.80004 │ 0.230271  │
│ XGB     │ 7.08965 │ 100.852  │  9.96463 │ 0.195461  │
╘═════════╧═════════╧══════════╧══════════╧═══════════╛
</pre></div>
</div>
</section>
<section id="best-regression-model">
<h3>Best Regression Model<a class="headerlink" href="#best-regression-model" title="Link to this heading">¶</a></h3>
<p>After applying cross-validation, Linear Regression (LR) emerged as the top-performing model with an R² of 0.265, followed by Ridge Regression (R) with an R² of 0.256, and Lasso Regression (L) with an R² of 0.247.</p>
<p>Next, we selected features from borehole C-1319-005 to predict GR, based on the best model trained on borehole TC-3660-008. The chosen model is LR, with additional predictions generated using XGB.</p>
<p>Petrophysical features of borehole TC-1319-005</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3_5</span> <span class="o">=</span> <span class="n">features3</span><span class="p">[</span><span class="n">features3</span><span class="o">.</span><span class="n">Hole</span><span class="o">==</span><span class="s1">&#39;TC-1319-005&#39;</span><span class="p">]</span>
<span class="n">features3_5</span> <span class="o">=</span> <span class="n">features3_5</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">features3_5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Hole</th>
      <th>From</th>
      <th>Len</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
      <th>Form</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-1319-005</td>
      <td>265.77</td>
      <td>11.2</td>
      <td>2.610000</td>
      <td>5725.879959</td>
      <td>3073.767206</td>
      <td>0.108</td>
      <td>36.995337</td>
      <td>5489.392555</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-1319-005</td>
      <td>271.66</td>
      <td>11.8</td>
      <td>2.786624</td>
      <td>5514.000000</td>
      <td>2222.000000</td>
      <td>0.108</td>
      <td>26.060000</td>
      <td>4600.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-1319-005</td>
      <td>277.05</td>
      <td>10.3</td>
      <td>3.399000</td>
      <td>5754.000000</td>
      <td>2085.000000</td>
      <td>0.237</td>
      <td>17.520000</td>
      <td>10200.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-1319-005</td>
      <td>282.55</td>
      <td>11.2</td>
      <td>2.800579</td>
      <td>5773.000000</td>
      <td>2011.000000</td>
      <td>0.151</td>
      <td>28.130000</td>
      <td>5800.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-1319-005</td>
      <td>287.20</td>
      <td>10.8</td>
      <td>3.293000</td>
      <td>6034.000000</td>
      <td>2122.000000</td>
      <td>0.176</td>
      <td>6.880000</td>
      <td>15500.000000</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>156</th>
      <td>TC-1319-005</td>
      <td>1034.65</td>
      <td>9.8</td>
      <td>2.470000</td>
      <td>4279.000000</td>
      <td>1808.000000</td>
      <td>0.028</td>
      <td>34.740000</td>
      <td>1900.000000</td>
      <td>P</td>
    </tr>
    <tr>
      <th>157</th>
      <td>TC-1319-005</td>
      <td>1038.37</td>
      <td>9.5</td>
      <td>2.559000</td>
      <td>5163.000000</td>
      <td>1975.000000</td>
      <td>0.221</td>
      <td>47.820000</td>
      <td>1400.000000</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>158</th>
      <td>TC-1319-005</td>
      <td>1041.85</td>
      <td>9.8</td>
      <td>2.479000</td>
      <td>4925.000000</td>
      <td>2648.579509</td>
      <td>0.054</td>
      <td>61.170000</td>
      <td>906.500000</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>159</th>
      <td>TC-1319-005</td>
      <td>1046.35</td>
      <td>10.6</td>
      <td>2.455000</td>
      <td>5217.025190</td>
      <td>2674.318401</td>
      <td>0.158</td>
      <td>44.440000</td>
      <td>1300.000000</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>160</th>
      <td>TC-1319-005</td>
      <td>1049.20</td>
      <td>10.0</td>
      <td>2.470000</td>
      <td>4673.000000</td>
      <td>2595.011555</td>
      <td>0.157</td>
      <td>78.880000</td>
      <td>187.100000</td>
      <td>PAL</td>
    </tr>
  </tbody>
</table>
<p>161 rows × 10 columns</p>
</div>
</div>
<br />
<br /><p>Petrophysical features of borehole TC-1319-005 for modeling</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features_model_5</span> <span class="o">=</span> <span class="n">features3_5</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Hole&#39;</span><span class="p">,</span> <span class="s1">&#39;Len&#39;</span><span class="p">,</span> <span class="s1">&#39;Form&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">features_model_5</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">features_model_5</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>(161, 7)
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>265.77</td>
      <td>2.610000</td>
      <td>5725.879959</td>
      <td>3073.767206</td>
      <td>0.108</td>
      <td>36.995337</td>
      <td>5489.392555</td>
    </tr>
    <tr>
      <th>1</th>
      <td>271.66</td>
      <td>2.786624</td>
      <td>5514.000000</td>
      <td>2222.000000</td>
      <td>0.108</td>
      <td>26.060000</td>
      <td>4600.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>277.05</td>
      <td>3.399000</td>
      <td>5754.000000</td>
      <td>2085.000000</td>
      <td>0.237</td>
      <td>17.520000</td>
      <td>10200.000000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>282.55</td>
      <td>2.800579</td>
      <td>5773.000000</td>
      <td>2011.000000</td>
      <td>0.151</td>
      <td>28.130000</td>
      <td>5800.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>287.20</td>
      <td>3.293000</td>
      <td>6034.000000</td>
      <td>2122.000000</td>
      <td>0.176</td>
      <td>6.880000</td>
      <td>15500.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>GR by Linear Regressor</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">lr_model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">lr_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="n">gr5_lr</span> <span class="o">=</span> <span class="n">lr_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">features_model_5</span><span class="p">)</span>
<span class="n">gr5_lr</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([37.48012316, 40.29644384, 23.09190308, 44.8346237 , 27.11026391,
       35.69517186, 35.80346419, 42.98681624, 21.71842209, 50.42072407,
       43.10646152, 42.64311325, 36.81285745, 35.75724267, 24.77325061,
       38.88608028, 18.99647974, 18.34440846, 24.71733796, 49.77336379,
       31.50291417, 50.27812368, 12.68860118, 40.97470383, 41.35654788,
        9.46749403, 45.41312187, 57.11531171, 52.44942385, 55.00547771,
       54.99299988, 58.31717629, 63.00910746, 38.18780739, 43.40488394,
       53.54787669, 38.28788144, 54.77673522, 53.94068928, 50.00196899,
       53.33280443, 51.97077575, 43.94754544, 44.7692286 , 55.2820785 ,
       42.99287884, 43.53616197, 43.90804534, 45.1923788 , 43.3995711 ,
       52.41320378, 38.40547193, 49.45734775, 54.47626681, 35.21860407,
       40.97396549, 44.98800414, 52.50782359, 33.17683036, 56.93967984,
       31.80814629, 38.25475496, 58.61926752, 46.56422313, 55.22333646,
       48.95181455, 56.40445626, 56.21276624, 40.55208937, 44.54711027,
       34.30283305, 41.41804912, 56.44581239, 50.82112976, 38.51075176,
       42.79861258, 45.19983303, 50.65237446, 38.59099861, 52.70893187,
       48.80542021, 42.14681373, 62.89384827, 46.03558981, 41.10928562,
       48.24311094, 41.97767837, 45.75722795, 48.64259008, 48.654642  ,
       45.50473295, 40.33085351, 44.94789532, 43.92711492, 44.22012991,
       49.9342732 , 60.21970233, 62.67858876, 62.02673151, 52.49919054,
       46.20133463, 50.31771774, 44.34999683, 54.34472837, 32.06757116,
       46.52112522, 66.25802377, 58.53394378, 55.59449825, 61.29707256,
       51.95505826, 53.61999492, 51.86700364, 54.94377794, 54.86303988,
       59.14183574, 66.23808415, 55.51343349, 59.19185001, 52.3024468 ,
       48.61038302, 64.82166153, 46.11411479, 64.31701643, 63.04114529,
       52.15649911, 56.70399617, 51.08228262, 65.68280901, 59.08239203,
       51.20549995, 38.84526869, 62.50110662, 48.03486534, 54.3338539 ,
       53.59520789, 51.58907318, 51.19657462, 53.01946386, 47.82961527,
       71.89787018, 65.52042076, 54.58325456, 51.06668569, 68.48469698,
       64.49554711, 48.54356557, 51.14052389, 51.62244032, 50.396638  ,
       59.06133645, 68.13949395, 75.84718351, 74.02208004, 62.65090578,
       71.2700738 , 67.4500938 , 69.8234084 , 61.83761112, 64.01707194,
       64.17237329])
</pre></div>
</div>
<p>GR by Extreme Gradient Boosting Regressor</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">xgb_model</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">XGBRegressor</span><span class="p">(</span><span class="n">objective</span> <span class="o">=</span><span class="s1">&#39;reg:squarederror&#39;</span><span class="p">)</span>
<span class="n">xgb_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="n">gr5_xgb</span> <span class="o">=</span> <span class="n">xgb_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">features_model_5</span><span class="p">)</span>
<span class="n">gr5_xgb</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([34.75164 , 40.796104, 36.992447, 42.021427, 35.146862, 32.735653,
       31.437817, 44.679855, 25.369324, 37.394672, 37.02685 , 34.253475,
       41.54279 , 35.28796 , 37.156284, 27.499958, 24.900589, 59.073536,
       25.334816, 33.707527, 30.582035, 36.551727, 58.758087, 39.717037,
       37.68949 , 51.238953, 37.855713, 37.301083, 36.851   , 33.767624,
       33.657173, 35.071648, 39.557102, 36.829685, 33.846024, 37.697605,
       37.730824, 34.91515 , 36.3279  , 38.628242, 37.983574, 38.069294,
       38.160236, 38.536686, 38.399925, 38.082027, 39.27452 , 37.119156,
       39.841293, 45.398674, 35.81751 , 38.662144, 35.173935, 34.593754,
       33.010708, 39.53115 , 39.431847, 41.398838, 35.45763 , 35.191555,
       34.551064, 31.259857, 38.560356, 37.284836, 41.16499 , 38.056583,
       41.03737 , 35.434082, 38.705368, 39.224365, 36.462032, 36.3096  ,
       36.547577, 45.77963 , 41.261803, 33.92088 , 34.588528, 39.656155,
       39.15763 , 37.552555, 38.922432, 39.36756 , 38.62001 , 38.477215,
       41.59901 , 40.979454, 47.4265  , 53.00436 , 54.575684, 48.65887 ,
       52.29925 , 49.431183, 51.90922 , 49.391224, 52.66824 , 49.652584,
       48.35062 , 44.88772 , 53.68105 , 40.471123, 49.45793 , 51.189827,
       48.084194, 53.25084 , 50.381542, 59.261337, 65.46839 , 41.859623,
       46.78074 , 45.050728, 41.25792 , 49.75928 , 49.73571 , 60.701645,
       60.768967, 61.67022 , 61.20107 , 61.175545, 61.259388, 56.77341 ,
       55.918613, 51.66773 , 54.700287, 54.94038 , 57.015076, 53.717358,
       53.812485, 66.552025, 67.536354, 56.427017, 57.21038 , 49.67948 ,
       54.108974, 54.36197 , 55.57285 , 53.881783, 55.802116, 55.35852 ,
       54.312916, 55.4986  , 62.86732 , 53.801105, 54.689976, 54.729584,
       51.35334 , 66.19035 , 68.41729 , 55.093616, 68.71511 , 56.620056,
       53.18428 , 55.686577, 52.945896, 52.141483, 55.897858, 50.89671 ,
       54.226032, 51.24211 , 68.31796 , 50.653297, 74.86713 ],
      dtype=float32)
</pre></div>
</div>
<p>Merge the two synthetic GRs into the petrophysical data of borehole TC-1319-005</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3_5</span><span class="p">[</span><span class="s1">&#39;GR_lr&#39;</span><span class="p">],</span> <span class="n">features3_5</span><span class="p">[</span><span class="s1">&#39;GR_xgb&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">gr5_lr</span><span class="p">,</span> <span class="n">gr5_xgb</span>
<span class="n">features3_5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Hole</th>
      <th>From</th>
      <th>Len</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
      <th>Form</th>
      <th>GR_lr</th>
      <th>GR_xgb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TC-1319-005</td>
      <td>265.77</td>
      <td>11.2</td>
      <td>2.610000</td>
      <td>5725.879959</td>
      <td>3073.767206</td>
      <td>0.108</td>
      <td>36.995337</td>
      <td>5489.392555</td>
      <td>CALP</td>
      <td>37.480123</td>
      <td>34.751640</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TC-1319-005</td>
      <td>271.66</td>
      <td>11.8</td>
      <td>2.786624</td>
      <td>5514.000000</td>
      <td>2222.000000</td>
      <td>0.108</td>
      <td>26.060000</td>
      <td>4600.000000</td>
      <td>CALP</td>
      <td>40.296444</td>
      <td>40.796104</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TC-1319-005</td>
      <td>277.05</td>
      <td>10.3</td>
      <td>3.399000</td>
      <td>5754.000000</td>
      <td>2085.000000</td>
      <td>0.237</td>
      <td>17.520000</td>
      <td>10200.000000</td>
      <td>CALP</td>
      <td>23.091903</td>
      <td>36.992447</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TC-1319-005</td>
      <td>282.55</td>
      <td>11.2</td>
      <td>2.800579</td>
      <td>5773.000000</td>
      <td>2011.000000</td>
      <td>0.151</td>
      <td>28.130000</td>
      <td>5800.000000</td>
      <td>CALP</td>
      <td>44.834624</td>
      <td>42.021427</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TC-1319-005</td>
      <td>287.20</td>
      <td>10.8</td>
      <td>3.293000</td>
      <td>6034.000000</td>
      <td>2122.000000</td>
      <td>0.176</td>
      <td>6.880000</td>
      <td>15500.000000</td>
      <td>CALP</td>
      <td>27.110264</td>
      <td>35.146862</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>156</th>
      <td>TC-1319-005</td>
      <td>1034.65</td>
      <td>9.8</td>
      <td>2.470000</td>
      <td>4279.000000</td>
      <td>1808.000000</td>
      <td>0.028</td>
      <td>34.740000</td>
      <td>1900.000000</td>
      <td>P</td>
      <td>67.450094</td>
      <td>54.226032</td>
    </tr>
    <tr>
      <th>157</th>
      <td>TC-1319-005</td>
      <td>1038.37</td>
      <td>9.5</td>
      <td>2.559000</td>
      <td>5163.000000</td>
      <td>1975.000000</td>
      <td>0.221</td>
      <td>47.820000</td>
      <td>1400.000000</td>
      <td>LIS</td>
      <td>69.823408</td>
      <td>51.242111</td>
    </tr>
    <tr>
      <th>158</th>
      <td>TC-1319-005</td>
      <td>1041.85</td>
      <td>9.8</td>
      <td>2.479000</td>
      <td>4925.000000</td>
      <td>2648.579509</td>
      <td>0.054</td>
      <td>61.170000</td>
      <td>906.500000</td>
      <td>LIS</td>
      <td>61.837611</td>
      <td>68.317963</td>
    </tr>
    <tr>
      <th>159</th>
      <td>TC-1319-005</td>
      <td>1046.35</td>
      <td>10.6</td>
      <td>2.455000</td>
      <td>5217.025190</td>
      <td>2674.318401</td>
      <td>0.158</td>
      <td>44.440000</td>
      <td>1300.000000</td>
      <td>LIS</td>
      <td>64.017072</td>
      <td>50.653297</td>
    </tr>
    <tr>
      <th>160</th>
      <td>TC-1319-005</td>
      <td>1049.20</td>
      <td>10.0</td>
      <td>2.470000</td>
      <td>4673.000000</td>
      <td>2595.011555</td>
      <td>0.157</td>
      <td>78.880000</td>
      <td>187.100000</td>
      <td>PAL</td>
      <td>64.172373</td>
      <td>74.867126</td>
    </tr>
  </tbody>
</table>
<p>161 rows × 12 columns</p>
</div>
</div>
<br />
<br /><p>There are no NaNs in the merge data of borehole TC-1319-005</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3_5</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 161 entries, 0 to 160
Data columns (total 12 columns):
 #   Column  Non-Null Count  Dtype
---  ------  --------------  -----
 0   Hole    161 non-null    object
 1   From    161 non-null    float64
 2   Len     161 non-null    float64
 3   Den     161 non-null    float64
 4   Vp      161 non-null    float64
 5   Vs      161 non-null    float64
 6   Mag     161 non-null    float64
 7   Ip      161 non-null    float64
 8   Res     161 non-null    float64
 9   Form    161 non-null    object
 10  GR_lr   161 non-null    float64
 11  GR_xgb  161 non-null    float32
dtypes: float32(1), float64(9), object(2)
memory usage: 14.6+ KB
</pre></div>
</div>
</section>
</section>
<section id="understanding-the-model">
<h2>Understanding the Model<a class="headerlink" href="#understanding-the-model" title="Link to this heading">¶</a></h2>
<p>Beyond determining which regression model performs better, it is important to examine the coefficients of the Linear Regression (LR) model to understand the relative importance and influence of each feature. The magnitude and sign of these coefficients reveal which features contribute most to the target, whether positively or negatively.</p>
<p>The table and plot below (negative coefficients were inverted for the logarithm, and colored in red) show that Den has a strong negative impact, while Mag has a significant positive effect. In contrast, Vp, Vs, and Ip have much smaller impacts, and the influence of Res is insignificant. The intercept represents the baseline value when all features are zero.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Den</th>
      <th>Vp</th>
      <th>Vs</th>
      <th>Mag</th>
      <th>Ip</th>
      <th>Res</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28</th>
      <td>140.35</td>
      <td>2.633</td>
      <td>5814.377420</td>
      <td>3138.868627</td>
      <td>0.090</td>
      <td>31.808800</td>
      <td>6387.399758</td>
    </tr>
    <tr>
      <th>13</th>
      <td>64.54</td>
      <td>2.677</td>
      <td>5643.825284</td>
      <td>3011.626392</td>
      <td>0.038</td>
      <td>35.190000</td>
      <td>2500.000000</td>
    </tr>
    <tr>
      <th>74</th>
      <td>399.33</td>
      <td>2.829</td>
      <td>5531.000000</td>
      <td>3153.000000</td>
      <td>0.103</td>
      <td>67.780000</td>
      <td>397.000000</td>
    </tr>
    <tr>
      <th>24</th>
      <td>120.40</td>
      <td>2.723</td>
      <td>5805.808808</td>
      <td>3084.328392</td>
      <td>0.071</td>
      <td>30.704049</td>
      <td>6429.850185</td>
    </tr>
    <tr>
      <th>85</th>
      <td>442.50</td>
      <td>2.678</td>
      <td>5682.000000</td>
      <td>2890.000000</td>
      <td>0.073</td>
      <td>55.790000</td>
      <td>4700.000000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>17</th>
      <td>84.42</td>
      <td>2.689</td>
      <td>5858.000000</td>
      <td>3289.000000</td>
      <td>0.031</td>
      <td>20.760000</td>
      <td>5300.000000</td>
    </tr>
    <tr>
      <th>98</th>
      <td>504.62</td>
      <td>2.712</td>
      <td>5598.000000</td>
      <td>3445.000000</td>
      <td>0.035</td>
      <td>93.260000</td>
      <td>1500.000000</td>
    </tr>
    <tr>
      <th>66</th>
      <td>349.95</td>
      <td>2.693</td>
      <td>5587.000000</td>
      <td>3135.000000</td>
      <td>0.042</td>
      <td>24.750000</td>
      <td>4200.000000</td>
    </tr>
    <tr>
      <th>126</th>
      <td>640.00</td>
      <td>2.725</td>
      <td>6037.000000</td>
      <td>3367.000000</td>
      <td>0.234</td>
      <td>73.220000</td>
      <td>2900.000000</td>
    </tr>
    <tr>
      <th>109</th>
      <td>559.00</td>
      <td>2.721</td>
      <td>5747.000000</td>
      <td>3289.000000</td>
      <td>0.078</td>
      <td>31.310000</td>
      <td>3700.000000</td>
    </tr>
  </tbody>
</table>
<p>133 rows × 7 columns</p>
</div>
</div>
<br />
<br /><p>Linear regressor coefficients</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">lr_model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">lr_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Features:&#39;</span><span class="p">,</span> <span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Coeficientes:&quot;</span><span class="p">,</span> <span class="n">lr_model</span><span class="o">.</span><span class="n">coef_</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Intercepto:&quot;</span><span class="p">,</span> <span class="n">lr_model</span><span class="o">.</span><span class="n">intercept_</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Features: Index([&#39;From&#39;, &#39;Den&#39;, &#39;Vp&#39;, &#39;Vs&#39;, &#39;Mag&#39;, &#39;Ip&#39;, &#39;Res&#39;], dtype=&#39;object&#39;)

Coeficientes: [ 2.27539299e-02 -3.56367531e+01  4.98929080e-03 -1.28090298e-02
  1.19706930e+01  7.13230615e-02  1.08666969e-04]

Intercepto: 130.7206610710383
</pre></div>
</div>
<p>Linear regressor coefficients in table</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">features_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Intercepto&#39;</span><span class="p">)</span>

<span class="n">coef_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">lr_model</span><span class="o">.</span><span class="n">coef_</span><span class="p">)</span>
<span class="n">coef_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lr_model</span><span class="o">.</span><span class="n">intercept_</span><span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">features_list</span><span class="p">,</span> <span class="n">coef_list</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tabulate</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Feature&#39;</span><span class="p">,</span> <span class="s1">&#39;Coefficient&#39;</span><span class="p">],</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;fancy_outline&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>╒════════════╤═══════════════╕
│ Feature    │   Coefficient │
╞════════════╪═══════════════╡
│ From       │   0.0227539   │
│ Den        │ -35.6368      │
│ Vp         │   0.00498929  │
│ Vs         │  -0.012809    │
│ Mag        │  11.9707      │
│ Ip         │   0.0713231   │
│ Res        │   0.000108667 │
│ Intercepto │ 130.721       │
╘════════════╧═══════════════╛
</pre></div>
</div>
<p>Linear regressor coefficients in linear and log10 plot</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">features_list</span><span class="p">,</span> <span class="p">(</span><span class="n">coef_list</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Positive&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">features_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">coef_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;negative&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Coeficients&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">features_list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">coef_list</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">features_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="o">-</span><span class="n">coef_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">features_list</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="o">-</span><span class="n">coef_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Log10[Coeficients]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">;</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_03_no_3_modeling_002.png" srcset="../../_images/sphx_glr_03_no_3_modeling_002.png" alt="03 no 3 modeling" class = "sphx-glr-single-img"/><div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;function tight_layout at 0x7f32d4e31360&gt;
</pre></div>
</div>
</section>
<section id="graphic-comparison">
<h2>Graphic Comparison<a class="headerlink" href="#graphic-comparison" title="Link to this heading">¶</a></h2>
<p>The legacy GR data and major formation tops from borehole TC-3660-008 were integrated in the first notebook (1/3), provide a reference for comparing the new ML-generated GRs in borehole TC-1319-005. While the Linear Regression (LR) model achieved a higher R² score, the GR predictions generated by the XGB model (with an R² of only 0.170) more closely follow the patterns observed in the reference borehole TC-3660-008.</p>
<p>The original and ML-generated GRs are presented in the plot at the end of the section. To make the comparison easier between both ML-generated GRs, the GR generated by the XGB algorithm (in orange) was displayed to the right by adding 40 API units.</p>
<p>Load of tops from borehole TC-3660-008</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Leer el archivo JSON</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">base_path</span><span class="si">}</span><span class="s1">/tops_list_8.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">tops_list_8</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>

<span class="n">tops_list_8</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[{&#39;name&#39;: &#39;CALP&#39;, &#39;top&#39;: 9.6, &#39;base&#39;: 270.95, &#39;color&#39;: &#39;#CCDF9A&#39;}, {&#39;name&#39;: &#39;FLT&#39;, &#39;top&#39;: 270.95, &#39;base&#39;: 304.3, &#39;color&#39;: &#39;#FF0000&#39;}, {&#39;name&#39;: &#39;CALP&#39;, &#39;top&#39;: 304.3, &#39;base&#39;: 345.9, &#39;color&#39;: &#39;#CCDF9A&#39;}, {&#39;name&#39;: &#39;VISS&#39;, &#39;top&#39;: 345.9, &#39;base&#39;: 363.8, &#39;color&#39;: &#39;#D9E9F0&#39;}, {&#39;name&#39;: &#39;FLT&#39;, &#39;top&#39;: 363.8, &#39;base&#39;: 369.26, &#39;color&#39;: &#39;#FF0000&#39;}, {&#39;name&#39;: &#39;VISS&#39;, &#39;top&#39;: 369.26, &#39;base&#39;: 399.33, &#39;color&#39;: &#39;#D9E9F0&#39;}, {&#39;name&#39;: &#39;FLT&#39;, &#39;top&#39;: 399.33, &#39;base&#39;: 401.88, &#39;color&#39;: &#39;#FF0000&#39;}, {&#39;name&#39;: &#39;VISS&#39;, &#39;top&#39;: 401.88, &#39;base&#39;: 424.46, &#39;color&#39;: &#39;#D9E9F0&#39;}, {&#39;name&#39;: &#39;FLT&#39;, &#39;top&#39;: 424.46, &#39;base&#39;: 460.16, &#39;color&#39;: &#39;#FF0000&#39;}, {&#39;name&#39;: &#39;S&#39;, &#39;top&#39;: 460.16, &#39;base&#39;: 504.62, &#39;color&#39;: &#39;#8CBAE2&#39;}, {&#39;name&#39;: &#39;LABL&#39;, &#39;top&#39;: 504.62, &#39;base&#39;: 724.5, &#39;color&#39;: &#39;#8A6E9F&#39;}, {&#39;name&#39;: &#39;SP&#39;, &#39;top&#39;: 724.5, &#39;base&#39;: 785.08, &#39;color&#39;: &#39;#ABA16C&#39;}, {&#39;name&#39;: &#39;P&#39;, &#39;top&#39;: 785.08, &#39;base&#39;: 814.55, &#39;color&#39;: &#39;#EBDE98&#39;}, {&#39;name&#39;: &#39;LIS&#39;, &#39;top&#39;: 814.55, &#39;base&#39;: 825.6, &#39;color&#39;: &#39;#806000&#39;}, {&#39;name&#39;: &#39;PAL&#39;, &#39;top&#39;: 825.6, &#39;base&#39;: 833.5, &#39;color&#39;: &#39;#2A7C43&#39;}]
</pre></div>
</div>
<p>Tops in borehole TC-1319-005</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">features3_5</span><span class="o">.</span><span class="n">Form</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([&#39;CALP&#39;, &#39;LABL&#39;, &#39;SP&#39;, &#39;P&#39;, &#39;LIS&#39;, &#39;PAL&#39;], dtype=object)
</pre></div>
</div>
<p>Extraction of top depths in borehole TC-1319-005</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">tops5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">features3_5</span><span class="o">.</span><span class="n">From</span><span class="p">[</span><span class="n">features3_5</span><span class="o">.</span><span class="n">Form</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="n">features3_5</span><span class="o">.</span><span class="n">Form</span><span class="o">.</span><span class="n">shift</span><span class="p">())])</span>
<span class="n">tops5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>265.77</td>
    </tr>
    <tr>
      <th>46</th>
      <td>503.40</td>
    </tr>
    <tr>
      <th>115</th>
      <td>830.45</td>
    </tr>
    <tr>
      <th>131</th>
      <td>911.10</td>
    </tr>
    <tr>
      <th>157</th>
      <td>1038.37</td>
    </tr>
    <tr>
      <th>160</th>
      <td>1049.20</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Extraction tops names in borehole TC-1319-005</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">tops5</span><span class="p">[</span><span class="s1">&#39;Top&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">features3_5</span><span class="o">.</span><span class="n">Form</span><span class="p">[</span><span class="n">features3_5</span><span class="o">.</span><span class="n">Form</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="n">features3_5</span><span class="o">.</span><span class="n">Form</span><span class="o">.</span><span class="n">shift</span><span class="p">())]</span>
<span class="n">tops5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Top</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>265.77</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>46</th>
      <td>503.40</td>
      <td>LABL</td>
    </tr>
    <tr>
      <th>115</th>
      <td>830.45</td>
      <td>SP</td>
    </tr>
    <tr>
      <th>131</th>
      <td>911.10</td>
      <td>P</td>
    </tr>
    <tr>
      <th>157</th>
      <td>1038.37</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>160</th>
      <td>1049.20</td>
      <td>PAL</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Reset of indexes</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">tops5</span> <span class="o">=</span> <span class="n">tops5</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">tops5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Top</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>265.77</td>
      <td>CALP</td>
    </tr>
    <tr>
      <th>1</th>
      <td>503.40</td>
      <td>LABL</td>
    </tr>
    <tr>
      <th>2</th>
      <td>830.45</td>
      <td>SP</td>
    </tr>
    <tr>
      <th>3</th>
      <td>911.10</td>
      <td>P</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1038.37</td>
      <td>LIS</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1049.20</td>
      <td>PAL</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Colors of the formations in borehole TC-1319-005</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">tops5</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span> <span class="s1">&#39;#CCDF9A&#39;</span><span class="p">,</span> <span class="s1">&#39;#8A6E9F&#39;</span><span class="p">,</span> <span class="s1">&#39;#ABA16C&#39;</span><span class="p">,</span> <span class="s1">&#39;#EBDE98&#39;</span><span class="p">,</span> <span class="s1">&#39;#806000&#39;</span><span class="p">,</span> <span class="s1">&#39;#2A7C43&#39;</span><span class="p">])</span>
<span class="n">tops5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Top</th>
      <th>color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>265.77</td>
      <td>CALP</td>
      <td>#CCDF9A</td>
    </tr>
    <tr>
      <th>1</th>
      <td>503.40</td>
      <td>LABL</td>
      <td>#8A6E9F</td>
    </tr>
    <tr>
      <th>2</th>
      <td>830.45</td>
      <td>SP</td>
      <td>#ABA16C</td>
    </tr>
    <tr>
      <th>3</th>
      <td>911.10</td>
      <td>P</td>
      <td>#EBDE98</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1038.37</td>
      <td>LIS</td>
      <td>#806000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1049.20</td>
      <td>PAL</td>
      <td>#2A7C43</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Bottom of the last formation</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">new_row5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span><span class="s1">&#39;From&#39;</span><span class="p">:</span><span class="mf">1059.20</span><span class="p">,</span> <span class="s1">&#39;Top&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">}])</span>
<span class="n">new_row5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Top</th>
      <th>color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1059.2</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Merge of dataframes</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">tops5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">tops5</span><span class="p">,</span> <span class="n">new_row5</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">tops5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>From</th>
      <th>Top</th>
      <th>color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>265.77</td>
      <td>CALP</td>
      <td>#CCDF9A</td>
    </tr>
    <tr>
      <th>1</th>
      <td>503.40</td>
      <td>LABL</td>
      <td>#8A6E9F</td>
    </tr>
    <tr>
      <th>2</th>
      <td>830.45</td>
      <td>SP</td>
      <td>#ABA16C</td>
    </tr>
    <tr>
      <th>3</th>
      <td>911.10</td>
      <td>P</td>
      <td>#EBDE98</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1038.37</td>
      <td>LIS</td>
      <td>#806000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1049.20</td>
      <td>PAL</td>
      <td>#2A7C43</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1059.20</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Rename of columns of the dataframe</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">tops5</span> <span class="o">=</span> <span class="n">tops5</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;From&#39;</span><span class="p">:</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="s1">&#39;Top&#39;</span><span class="p">:</span><span class="s1">&#39;name&#39;</span><span class="p">})</span>
<span class="n">tops5</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>depth</th>
      <th>name</th>
      <th>color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>265.77</td>
      <td>CALP</td>
      <td>#CCDF9A</td>
    </tr>
    <tr>
      <th>1</th>
      <td>503.40</td>
      <td>LABL</td>
      <td>#8A6E9F</td>
    </tr>
    <tr>
      <th>2</th>
      <td>830.45</td>
      <td>SP</td>
      <td>#ABA16C</td>
    </tr>
    <tr>
      <th>3</th>
      <td>911.10</td>
      <td>P</td>
      <td>#EBDE98</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1038.37</td>
      <td>LIS</td>
      <td>#806000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1049.20</td>
      <td>PAL</td>
      <td>#2A7C43</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1059.20</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>Convertion of the dataframe to a list of dictionaries by UDL, borehole TC-1319-005</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">tops_list_5</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">plot_tops</span><span class="p">(</span><span class="n">tops5</span><span class="p">)</span>
<span class="n">tops_list_5</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[{&#39;name&#39;: &#39;CALP&#39;, &#39;top&#39;: np.float64(265.77), &#39;base&#39;: np.float64(503.4), &#39;color&#39;: &#39;#CCDF9A&#39;}, {&#39;name&#39;: &#39;LABL&#39;, &#39;top&#39;: np.float64(503.4), &#39;base&#39;: np.float64(830.45), &#39;color&#39;: &#39;#8A6E9F&#39;}, {&#39;name&#39;: &#39;SP&#39;, &#39;top&#39;: np.float64(830.45), &#39;base&#39;: np.float64(911.1), &#39;color&#39;: &#39;#ABA16C&#39;}, {&#39;name&#39;: &#39;P&#39;, &#39;top&#39;: np.float64(911.1), &#39;base&#39;: np.float64(1038.37), &#39;color&#39;: &#39;#EBDE98&#39;}, {&#39;name&#39;: &#39;LIS&#39;, &#39;top&#39;: np.float64(1038.37), &#39;base&#39;: np.float64(1049.2), &#39;color&#39;: &#39;#806000&#39;}, {&#39;name&#39;: &#39;PAL&#39;, &#39;top&#39;: np.float64(1049.2), &#39;base&#39;: np.float64(1059.2), &#39;color&#39;: &#39;#2A7C43&#39;}]
</pre></div>
</div>
<p>Saving the tops to a json file</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;Output/tops_list_5.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">tops_list_5</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Plot of GRs with formations</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">141</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Real&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;lightblue&#39;</span><span class="p">)</span>
<span class="c1"># plt.plot(gr8.iloc[:,2].rolling(window=250).mean(), gr8.iloc[:,1], label=&#39;Mean 400&#39;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;GR (API)&#39;</span><span class="p">)</span>

<span class="c1"># Butterworth filter</span>
<span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">butter</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Wn</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">btype</span><span class="o">=</span><span class="s1">&#39;low&#39;</span><span class="p">)</span>
<span class="n">filtered_data</span> <span class="o">=</span> <span class="n">filtfilt</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">filtered_data</span><span class="p">,</span> <span class="n">gr8</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;BWF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;GR (API)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Depth (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">142</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tops_list_8</span><span class="p">)):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="n">tops_list_8</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;top&#39;</span><span class="p">],</span> <span class="n">tops_list_8</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;base&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">tops_list_8</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">122</span><span class="p">,</span> <span class="n">tops_list_8</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;top&#39;</span><span class="p">],</span> <span class="n">tops_list_8</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Formations&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">143</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">features3_5</span><span class="o">.</span><span class="n">GR_lr</span><span class="p">,</span> <span class="n">features3_5</span><span class="o">.</span><span class="n">From</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;LR&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">features3_5</span><span class="o">.</span><span class="n">GR_xgb</span> <span class="o">+</span> <span class="mi">40</span><span class="p">,</span> <span class="n">features3_5</span><span class="o">.</span><span class="n">From</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;XGB + 40&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;GR (API)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">144</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tops_list_5</span><span class="p">)):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="n">tops_list_5</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;top&#39;</span><span class="p">],</span> <span class="n">tops_list_5</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;base&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">tops_list_5</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">122</span><span class="p">,</span> <span class="n">tops_list_5</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;top&#39;</span><span class="p">],</span> <span class="n">tops_list_5</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Formations&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;GR and Formations in Boreholes</span><span class="se">\n</span><span class="s1">TC-3660-008                                                                   TC-1319-005&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;Output/all_grs.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_03_no_3_modeling_003.png" srcset="../../_images/sphx_glr_03_no_3_modeling_003.png" alt="GR and Formations in Boreholes TC-3660-008                                                                   TC-1319-005" class = "sphx-glr-single-img"/></section>
<section id="observations">
<h2>Observations<a class="headerlink" href="#observations" title="Link to this heading">¶</a></h2>
<p>Here are some observations related to the tasks covered in this notebook:</p>
<ul class="simple">
<li><p>This notebook highlights the utility of open-source Python tools in addressing the issue of incomplete and sparse petrophysical data in mining. The various regression models employed demonstrate that machine learning techniques can be effective in filling data gaps, even when direct measurements are limited or unavailable.</p></li>
<li><p>More complex models, such as Extreme Gradient Boosting, provided higher predictive accuracy following the pattern of the reference GR, but simpler models like Linear Regression offered better interpretability. This trade-off between accuracy and interpretability is a crucial consideration for practical applications in mining data analysis.</p></li>
<li><p>The coefficients in the Linear Regression model indicated that variables such as Den and Mag significantly impact the target variable (GR), demonstrating strong correlation and critical predictive roles in petrophysical properties. In contrast, Vp and Res were less important, contributing minimally to the model’s predictions.</p></li>
</ul>
</section>
<section id="final-remarks">
<h2>Final Remarks<a class="headerlink" href="#final-remarks" title="Link to this heading">¶</a></h2>
<p>The analysis of the petrophysical dataset from Collinstown highlights challenges related to data dispersion and scarcity, as well as the potential of machine learning (ML) tools to enhance the value of mining data.</p>
<p>Data dispersion, particularly in Den and Vp, complicates the generation of accurate models and reflects the inherent heterogeneity of the subsurface. Variations across boreholes and core samples, along with some false anomalies from measurement issues, must be addressed to ensure data integrity and reliable modeling. Low correlation (or low covariance) in the dataset, resulting from fractures and methodological limitations, leads to models with low R² values.</p>
<p>ML algorithms and Python-based tools have proven valuable for integrating legacy data with new sources, thereby improving dataset quality. Techniques such as imputation and regression modeling help fill gaps and enhance the resolution of petrophysical properties. Overall, ML tools present significant opportunities to improve legacy data and support its integration with new datasets, leading to more accurate mining models.</p>
<p>Both this analysis and the previous notebook demonstrate the effective use of open-source Python tools and ML models to address incomplete and sparse petrophysical data in mining exploration. This adaptable workflow can be applied across various geological contexts, benefiting other mining projects as well.</p>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h2>
<p>Here are some possible next steps to build on the work from this and the previous notebooks:</p>
<ul class="simple">
<li><p>Consider exploring classification models, especially if there is interest in classifying different types of rocks or deposits based on petrophysical properties rather than predicting continuous variables.</p></li>
<li><p>Explore advanced feature engineering or transformation techniques to uncover more complex relationships between variables. This could potentially improve the model’s performance.</p></li>
<li><p>Further optimize the machine learning models by performing hyperparameter tuning. This can improve the accuracy of the predictions and refine the model selection process.</p></li>
<li><p>Apply the propagation of missing properties using the models obtained here to other boreholes with limited data.</p></li>
</ul>
<p>These steps would extend the current analysis, enhance model accuracy, and contribute to more practical applications in mining exploration.</p>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> (0 minutes 3.688 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-05-petrophysics-03-no-3-modeling-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/0b8b51816ab9b16b4ffaa3e4a9a04346/03_no_3_modeling.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">03_no_3_modeling.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/7a260e8558abada8997cb93c35d4d916/03_no_3_modeling.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">03_no_3_modeling.py</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/vector-logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">Vector Geology</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Galleries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Vector Geology Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../external/external_examples.html">Bayesian Inference Theory</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_readers/index.html">Readers and Parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_structural_modeling/index.html">Structural Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_forward_engines/index.html">GeoPhysics and Inversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_probabilistic_modeling/index.html">Probabilistic Modeling</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Petrophysical Data Integration and Modeling</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_eda_integration_delivery_1.html">Modelling and Propagation of Legacy Petrophysical Data for Mining Exploration (1/3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_no_2_filling_gaps.html">Modeling and Propagation of Petrophysical Data for Mining Exploration (2/3)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modelling and Propagation of Legacy Petrophysical Data for Mining Exploration (3/3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#libraries">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-loading">Data Loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-merging">Data Merging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#depth-equalization">Depth Equalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filtering-and-dowsampling">Filtering and Dowsampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#integrated-dataframe">Integrated Dataframe</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#modeling">Modeling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-split">Data Split</a></li>
<li class="toctree-l4"><a class="reference internal" href="#best-regression-model">Best Regression Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#understanding-the-model">Understanding the Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#graphic-comparison">Graphic Comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="#observations">Observations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#final-remarks">Final Remarks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintenance.html">Maintenance</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023-2024, Vector Geology Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/examples/05_petrophysics/03_no_3_modeling.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>